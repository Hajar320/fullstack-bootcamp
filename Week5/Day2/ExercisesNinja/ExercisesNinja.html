<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<style>
    
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        .search-form {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        #searchInput {
            flex: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        #searchInput:focus {
            outline: none;
            border-color: #00a8ff;
        }
        
        button {
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .search-btn {
            background: #00a8ff;
            color: white;
        }
        
        .search-btn:hover {
            background: #0097e6;
        }
        
        .search-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .delete-all-btn {
            background: #e74c3c;
            color: white;
            margin-bottom: 20px;
        }
        
        .delete-all-btn:hover {
            background: #c0392b;
        }
        
        .gifs-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .gif-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .gif-image {
            width: 100%;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .delete-btn {
            background: #e74c3c;
            color: white;
            width: 100%;
            padding: 8px;
        }
        
        .delete-btn:hover {
            background: #c0392b;
        }
        
        .loading {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 20px;
        }
        
        .error {
            background: #ffeaea;
            color: #e74c3c;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            margin: 10px 0;
        }
        
        .empty-state {
            text-align: center;
            color: #666;
            padding: 40px;
        }

</style>
<body>
    <div class="container">
        <h1>üîç Giphy Search</h1>
        
        <form class="search-form" id="gifForm">
            <input 
                type="text" 
                class="search-input" 
                id="searchInput" 
                placeholder="Enter a category (e.g., cats, dogs, funny...)" 
                required
            >
            <button type="submit" class="search-btn">Search GIFs</button>
        </form>

        <div id="resultsContainer">
            <!-- GIFs will be displayed here -->
        </div>
    </div>
<script>

      //=========================
     //exercise 1 
    //============================

// Giphy API Configuration
const API_KEY = 'hpvZycW22qCjn5cRM1xtWB8NKq4dQ2My';
const BASE_URL = 'https://api.giphy.com/v1/gifs/search';

// DOM Elements
const gifForm = document.getElementById('gifForm');
const searchInput = document.getElementById('searchInput');
const resultsContainer = document.getElementById('resultsContainer');

// State to track current GIFs
let currentGifs = [];

// Function to fetch GIFs from Giphy API
async function fetchGifs(searchTerm) {
    try {
        showLoading();
        
        const response = await fetch(
            `${BASE_URL}?q=${encodeURIComponent(searchTerm)}&api_key=${API_KEY}&limit=20&rating=g`
        );

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();
        
        if (!data.data || data.data.length === 0) {
            showNoResults(searchTerm);
            currentGifs = []; // Clear current GIFs
            return;
        }

        // Store GIFs in state
        currentGifs = data.data;
        displayGifs(currentGifs);
        
    } catch (error) {
        showError(error.message);
        currentGifs = []; // Clear current GIFs on error
    }
}

// Function to display GIFs with delete button
function displayGifs(gifs) {
    resultsContainer.innerHTML = '';
    
    const gifsHTML = gifs.map(gif => `
        <div class="gif-card">
            <img 
                src="${gif.images.fixed_height.url}" 
                alt="${gif.title}"
                class="gif-img"
                loading="lazy"
            >
            <div class="gif-title">${gif.title || 'Untitled GIF'}</div>
        </div>
    `).join('');
    
    resultsContainer.innerHTML = `
        <div class="results-header">
            <button class="delete-btn" id="deleteAllBtn">
                üóëÔ∏è Delete All GIFs
            </button>
        </div>
        <div class="gifs-container">
            ${gifsHTML}
        </div>
    `;
    
    // Add event listener to delete button
    document.getElementById('deleteAllBtn').addEventListener('click', deleteAllGifs);
}

// Function to delete all GIFs
function deleteAllGifs() {
    currentGifs = []; // Clear the state
    resultsContainer.innerHTML = `
        <div class="no-results">
            All GIFs have been deleted. Search for new GIFs!
        </div>
    `;
}

// Function to show loading state
function showLoading() {
    resultsContainer.innerHTML = `
        <div class="loading">
            ‚è≥ Searching for GIFs...
        </div>
    `;
}

// Function to show error message
function showError(message) {
    resultsContainer.innerHTML = `
        <div class="error">
            ‚ùå Oops! Something went wrong: ${message}
        </div>
    `;
}

// Function to show no results message
function showNoResults(searchTerm) {
    resultsContainer.innerHTML = `
        <div class="no-results">
            No GIFs found for "${searchTerm}". Try a different search term!
        </div>
    `;
}

// Function to handle form submission
function handleFormSubmit(event) {
    event.preventDefault();
    
    const searchTerm = searchInput.value.trim();
    
    if (!searchTerm) {
        showError('Please enter a search term');
        return;
    }
    
    fetchGifs(searchTerm);
}

// Event Listeners
gifForm.addEventListener('submit', handleFormSubmit);

      //=========================
     //exercise 2 
    //============================


function exercise2(){

 console.log("exercise2");

    let resolveAfter2Seconds = function () {
    console.log("starting slow promise");
    return new Promise(resolve => {
        setTimeout(function () {
            resolve("slow");
            console.log("slow promise is done");
        }, 2000);
    });
};

let resolveAfter1Second = function () {
    console.log("starting fast promise");
    return new Promise(resolve => {
        setTimeout(function () {
            resolve("fast");
            console.log("fast promise is done");
        }, 1000);
    });
};

//The Promise.all() method returns a single Promise that fulfills when all of the promises passed as an iterable have been fulfilled.

let concurrentPromise = function () {
    console.log('==CONCURRENT START with Promise.all==');
    return Promise.all([resolveAfter2Seconds(), resolveAfter1Second()]).then((messages) => {
        console.log(messages[0]);
        console.log(messages[1]);
    });
}

setTimeout(concurrentPromise, 1000)

}

exercise2()
/*
1. After 1 second delay (setTimeout): "==CONCURRENT START with Promise.all=="
2. "starting slow promise" - logs immediately (starts 2-second timer)
3. "starting fast promise" - logs immediately (starts 1-second timer)
    BOTH PROMISES RUN SIMULTANEOUSLY
4. After 1 second: "fast promise is done" (fast promise resolves)
5. After 2 seconds: "slow promise is done" (slow promise resolves)
6. "slow" - value from slow promise
7. "fast" - value from fast promise
*/

      //=========================
     //exercise 3
    //============================

function exercise3(){

    console.log("exercise3");

let resolveAfter2Seconds = function () {
    console.log("starting slow promise");
    return new Promise(resolve => {
        setTimeout(function () {
            resolve("slow");
            console.log("slow promise is done");
        }, 2000);
    });
};

let resolveAfter1Second = function () {
    console.log("starting fast promise");
    return new Promise(resolve => {
        setTimeout(function () {
            resolve("fast");
            console.log("fast promise is done");
        }, 1000);
    });
};

let parallel = async function () {
    console.log('==PARALLEL with await Promise.all==');
    // Start 2 "jobs" in parallel and wait for both of them to complete
    await Promise.all([
        (async () => console.log(await resolveAfter2Seconds()))(),
        (async () => console.log(await resolveAfter1Second()))()
    ]);
}

setTimeout(parallel, 5000)

}

setTimeout(exercise3,5000)
/*
1. After 5 second delay (setTimeout): "==PARALLEL with await Promise.all=="
2. "starting slow promise" - logs immediately (starts 2-second timer)
3. "starting fast promise" - logs immediately (starts 1-second timer)
    BOTH PROMISES RUN SIMULTANEOUSLY
4. After 1 second: "fast promise is done" then "fast"
5. After 2 seconds: "slow promise is done" then "slow"
*/
      //=========================
     //exercise 4
    //============================

function exercise4(){

        console.log("exercise4");

    let resolveAfter2Seconds = function () {
    console.log("starting slow promise");
    return new Promise(resolve => {
        setTimeout(function () {
            resolve("slow");
            console.log("slow promise is done");
        }, 2000);
    });
};

let resolveAfter1Second = function () {
    console.log("starting fast promise");
    return new Promise(resolve => {
        setTimeout(function () {
            resolve("fast");
            console.log("fast promise is done");
        }, 1000);
    });
};

// This function does not handle errors. See warning below!
let parallelPromise = function () {
    console.log('==PARALLEL with Promise.then==');
    resolveAfter2Seconds().then((message) => console.log(message));
    resolveAfter1Second().then((message) => console.log(message));
}

setTimeout(parallelPromise, 13000)

}
setTimeout(exercise4,13000)
/*
1. After 13 second delay (setTimeout): "==PARALLEL with Promise.then=="
2. "starting slow promise" - logs immediately (starts 2-second timer)
3. "starting fast promise" - logs immediately (starts 1-second timer)
   ‚è≥ BOTH PROMISES RUN SIMULTANEOUSLY
4. After 1 second: "fast promise is done" then "fast"
5. After 2 seconds: "slow promise is done" then "slow"
*/


</script>
</body>
</html>